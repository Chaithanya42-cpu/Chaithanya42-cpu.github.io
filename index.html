<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Business Communication Trainer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Inter, system-ui, Arial;
  background:#0f172a;
  color:#e5e7eb;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:24px;
}
h1{ margin-bottom:14px; }

button{
  background:#2563eb;
  color:white;
  padding:12px 18px;
  border:none;
  border-radius:12px;
  font-size:16px;
  cursor:pointer;
}

#heard{
  margin-top:12px;
  opacity:.75;
  font-size:14px;
}

#visual{
  width:100%;
  max-width:900px;
  margin:20px 0;
  border-radius:16px;
  display:none;
}

#box{
  max-width:900px;
  background:#020617;
  padding:20px;
  border-radius:14px;
  font-size:18px;
  line-height:1.6;
  border-left:4px solid #38bdf8;
}
</style>
</head>

<body>

<h1>Business Communication Trainer</h1>

<button id="askBtn">ðŸŽ¤ Ask a Question</button>
<p id="heard"></p>

<img id="visual" />
<div id="box">Ask a question to begin.</div>

<script>
/* ===== CRM LINES ===== */
const LINES = [
  "Before we jump into solutions, I want to clearly understand the business context from your perspective.",
  "To make sure we are aligned, could you share what the primary goal is for this phase?",
  "From your point of view, what is the biggest challenge you are trying to solve right now?",
  "What would success look like for you at the end of the next 30 to 60 days?",
  "Let me quickly outline the agenda so we can use the time effectively.",
  "Overall, the campaign performed better than last month in terms of conversions.",
  "There are some gaps, and I want to call them out transparently.",
  "My recommendation would be to balance proven strategies with controlled testing.",
  "What we are seeking approval for today is the campaign structure and audience.",
  "I want to acknowledge this upfront â€” this should not have happened.",
  "Rather than reviewing every metric, letâ€™s focus on what actually matters.",
  "Thatâ€™s fair feedback, and I appreciate you sharing it openly.",
  "Letâ€™s align on ownership so thereâ€™s no confusion later.",
  "Thatâ€™s an important point, but itâ€™s slightly out of scope for todayâ€™s call.",
  "If thereâ€™s nothing else, weâ€™re aligned and good to proceed."
];

/* ===== VOICE OUTPUT ===== */
function speak(text){
  speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.rate = 1.5;
  speechSynthesis.speak(u);
}

/* ===== VOICE INPUT ===== */
const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
const rec = SR ? new SR() : null;

if(rec){
  rec.lang = "en-US";
  rec.onresult = e=>{
    const q = e.results[0][0].transcript.toLowerCase();
    document.getElementById("heard").textContent = `You asked: "${q}"`;
    answerQuestion(q);
  };
}

document.getElementById("askBtn").onclick = ()=>{
  if(!rec) alert("Voice input not supported on this browser.");
  else rec.start();
};

/* ===== CORE LOGIC ===== */
function answerQuestion(q){
  const index = LINES.findIndex(line =>
    q.split(" ").some(word => line.toLowerCase().includes(word))
  );

  const box = document.getElementById("box");
  const img = document.getElementById("visual");

  if(index === -1){
    box.textContent = "I could not find a matching response in my training data.";
    speak(box.textContent);
    img.style.display="none";
    return;
  }

  box.textContent = LINES[index];
  speak(LINES[index]);

  img.src = `images/line_${String(index+1).padStart(3,"0")}.png`;
  img.style.display="block";
}
</script>

</body>
</html>
